{"ast":null,"code":"import axios from \"axios\";\nimport { loginFailed, loginStart, loginSuccess, logOutFailed, logOutStart, logOutSuccess, registerFailed, registerStart, registerSuccess } from \"./authSlice\";\nexport const loginUser = async (account, dispatch, navigate) => {\n  dispatch(loginStart());\n  try {\n    const res = await axios.post(\"http://localhost:8000/v1/auth/login\", account);\n    if (res.data.accessToken) {\n      dispatch(loginSuccess(res.data));\n      localStorage.setItem('token', res.data.accessToken);\n      navigate(\"/\");\n    } else {\n      // Handle unexpected response (no access token)\n      dispatch(loginFailed(\"An unexpected error occurred.\"));\n    }\n  } catch (err) {\n    // Handle API request error\n    if (err.response && err.response.data && err.response.data.message) {\n      // API error message exists\n      dispatch(loginFailed(err.response.data.message));\n    } else {\n      // Handle other unexpected errors\n      dispatch(loginFailed(\"An unexpected error occurred.\"));\n    }\n  }\n};\n\n// export const loginUser = async (account, dispatch, navigate) => {\n//     dispatch(loginStart());\n//     try {\n//         const res = await axios.post(\"http://localhost:8000/v1/auth/login\", account);\n//         dispatch(loginSuccess(res.data));\n//         // console.log(res.data)\n//         // Save token to localStorage\n//         localStorage.setItem('token', res.data.accessToken);\n//         navigate(\"/\");\n//     } catch (err) {\n//         dispatch({\n//             type: loginFailed,\n//             payload: err.res.data.message\n//         });\n//     }\n// };","map":{"version":3,"names":["axios","loginFailed","loginStart","loginSuccess","logOutFailed","logOutStart","logOutSuccess","registerFailed","registerStart","registerSuccess","loginUser","account","dispatch","navigate","res","post","data","accessToken","localStorage","setItem","err","response","message"],"sources":["D:/TLCN/SourceCode/BloodnHeart/client/src/redux/apiRequest.js"],"sourcesContent":["import axios from \"axios\";\r\nimport {\r\n    loginFailed,\r\n    loginStart,\r\n    loginSuccess,\r\n    logOutFailed,\r\n    logOutStart,\r\n    logOutSuccess,\r\n    registerFailed,\r\n    registerStart,\r\n    registerSuccess,\r\n} from \"./authSlice\";\r\n\r\nexport const loginUser = async (account, dispatch, navigate) => {\r\n    dispatch(loginStart());\r\n    try {\r\n        const res = await axios.post(\"http://localhost:8000/v1/auth/login\", account);\r\n\r\n        if (res.data.accessToken) {\r\n            dispatch(loginSuccess(res.data));\r\n            localStorage.setItem('token', res.data.accessToken);\r\n            navigate(\"/\");\r\n        } else {\r\n            // Handle unexpected response (no access token)\r\n            dispatch(loginFailed(\"An unexpected error occurred.\"));\r\n        }\r\n    } catch (err) {\r\n        // Handle API request error\r\n        if (err.response && err.response.data && err.response.data.message) {\r\n            // API error message exists\r\n            dispatch(loginFailed(err.response.data.message));\r\n        } else {\r\n            // Handle other unexpected errors\r\n            dispatch(loginFailed(\"An unexpected error occurred.\"));\r\n        }\r\n    }\r\n};\r\n\r\n// export const loginUser = async (account, dispatch, navigate) => {\r\n//     dispatch(loginStart());\r\n//     try {\r\n//         const res = await axios.post(\"http://localhost:8000/v1/auth/login\", account);\r\n//         dispatch(loginSuccess(res.data));\r\n//         // console.log(res.data)\r\n//         // Save token to localStorage\r\n//         localStorage.setItem('token', res.data.accessToken);\r\n//         navigate(\"/\");\r\n//     } catch (err) {\r\n//         dispatch({\r\n//             type: loginFailed,\r\n//             payload: err.res.data.message\r\n//         });\r\n//     }\r\n// };\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SACIC,WAAW,EACXC,UAAU,EACVC,YAAY,EACZC,YAAY,EACZC,WAAW,EACXC,aAAa,EACbC,cAAc,EACdC,aAAa,EACbC,eAAe,QACZ,aAAa;AAEpB,OAAO,MAAMC,SAAS,GAAG,MAAAA,CAAOC,OAAO,EAAEC,QAAQ,EAAEC,QAAQ,KAAK;EAC5DD,QAAQ,CAACV,UAAU,CAAC,CAAC,CAAC;EACtB,IAAI;IACA,MAAMY,GAAG,GAAG,MAAMd,KAAK,CAACe,IAAI,CAAC,qCAAqC,EAAEJ,OAAO,CAAC;IAE5E,IAAIG,GAAG,CAACE,IAAI,CAACC,WAAW,EAAE;MACtBL,QAAQ,CAACT,YAAY,CAACW,GAAG,CAACE,IAAI,CAAC,CAAC;MAChCE,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEL,GAAG,CAACE,IAAI,CAACC,WAAW,CAAC;MACnDJ,QAAQ,CAAC,GAAG,CAAC;IACjB,CAAC,MAAM;MACH;MACAD,QAAQ,CAACX,WAAW,CAAC,+BAA+B,CAAC,CAAC;IAC1D;EACJ,CAAC,CAAC,OAAOmB,GAAG,EAAE;IACV;IACA,IAAIA,GAAG,CAACC,QAAQ,IAAID,GAAG,CAACC,QAAQ,CAACL,IAAI,IAAII,GAAG,CAACC,QAAQ,CAACL,IAAI,CAACM,OAAO,EAAE;MAChE;MACAV,QAAQ,CAACX,WAAW,CAACmB,GAAG,CAACC,QAAQ,CAACL,IAAI,CAACM,OAAO,CAAC,CAAC;IACpD,CAAC,MAAM;MACH;MACAV,QAAQ,CAACX,WAAW,CAAC,+BAA+B,CAAC,CAAC;IAC1D;EACJ;AACJ,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}